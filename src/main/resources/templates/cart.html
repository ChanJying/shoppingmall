<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>我的购物车-小米商城</title>
    <link rel="stylesheet" type="text/css" th:href="@{/css/style.css}">
</head>
<body>
<!-- start header -->
<!--end header -->

<!-- start banner_x -->
<div class="banner_x center">
    <a th:href="@{/index} "target="_blank"><div class="logo fl"></div></a>

    <div class="wdgwc fl ml40">我的购物车</div>
    <div class="wxts fl ml20">温馨提示：产品是否购买成功，以最终下单为准哦，请尽快结算</div>
    <div class="dlzc fr">
        <li><a th:href="@{/selfInfo/selfOrder}" target="_blank" th:text="'个人中心:'+${customer.username}" ></a></li>
    </div>
    <div class="clear"></div>
</div>
<div class="xiantiao"></div>
<div class="gwcxqbj" style="height: auto">
    <div class="gwcxd center">
        <div class="top2 center">
            <div class="sub_top fl">
                <input type="checkbox" value="quanxuan" class="quanxuan" />全选
            </div>
            <div class="sub_top fl">商品名称</div>
            <div class="sub_top fl">单价</div>
            <div class="sub_top fl">数量</div>
            <div class="sub_top fl">小计</div>
            <div class="sub_top fr">操作</div>
            <div class="clear"></div>
        </div>
        <div class="content2 center" th:each="cartVo,cartVoStat:${cartVos}" >
            <div class="sub_content fl ">
                <input type="checkbox" value="quanxuan" class="quanxuan" />
            </div>
            <input id="cartId" th:value="${cartVo.cartId}" type="hidden">
            <div class="sub_content fl"><img style="width: 80px;height: 80px" th:src="@{${cartVo.goodsImg}}"></div>
            <div class="sub_content fl ft20" th:text="${cartVo.goodsContent}"></div>
            <div class="sub_content fl " th:text="${cartVo.goodsPrice}"></div>
            <div class="sub_content fl">
                <input class="shuliang" type="number" th:value="${cartVo.goodsNums}" step="1" min="1" >
            </div>
            <div class="sub_content fl" th:text="${cartVo.goodsPrice}*${cartVo.goodsNums}"></div>
            <div class="sub_content fl" style="cursor:pointer;"><a onclick="deleteCart()">×</a></div>

        </div>
        <div class="clear"></div>

    </div>
    <div class="jiesuandan mt20 center">
        <div class="tishi fl ml20">
            <ul>
                <li><a th:href="@{/index}" target="_blank">继续购物</a></li>
                <li>|</li>
                <li>共<span>2</span>件商品，已选择<span>1</span>件</li>
                <div class="clear"></div>
            </ul>
        </div>
        <div class="jiesuan fr">
            <div class="jiesuanjiage fl">合计（不含运费）：<span>2499.00元</span></div>
            <div class="jsanniu fr"><input class="jsan" type="submit" name="jiesuan"  value="去结算"/></div>
            <div class="clear"></div>
        </div>
        <div class="clear"></div>
    </div>

</div>




<!-- footer -->
<div th:replace="~{common/commons.html::footer}"></div>

</body>
<script type="text/javascript" th:src="@{/js/common/common.js}"></script>
<script type="text/javascript" th:src="@{/js/jquery-3.6.0.min.js}"></script>
<script type="text/javascript" th:src="@{/js/layer/layer.js}"></script>
<script>
    function deleteCart(){
        g_showLoading();
        $.ajax({
            url:"/cart/deleteCart/"+$("#cartId").val(),
            success:function (data) {
                layer.closeAll();
                if(data.code==0){
                    layer.msg("成功");
                    location.reload();
                }else {
                    layer.msg(data.msg);
                }
            },
            error:function () {
                layer.closeAll();
            }
        })

    }
</script>
</html>
